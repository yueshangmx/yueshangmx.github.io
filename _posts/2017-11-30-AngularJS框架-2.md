---
layout: post
title: 26.AngularJS-2
date: 2017-11-30
description: "AngularJS"
tags: 笔记   
---

### 7.AngularJS四大特性之三——依赖注入
`依赖(Dependency)`：若某个函数调用时需要其它的对象作为形参，就此函数依赖于形参对象。
```
function Driver( car ){		//司机依赖于一个car对象
 	car.start();
  car.run();
  car.stop();
}
```
#### 1.如何解决依赖关系
 
##### (1)主动创建方式
```
var c1 = new Car();	//主动创建依赖对象
var d1 = new Driver( c1 );  //传递依赖对象
```

##### (2)被动注入(Injection)方式
```
module.controller('控制器', function($scope, $interval){...});
```
Angular中的ngController指令在实例化控制器对象时，会根据指定的形参名，创建出控制器所依赖的对象，并注入给控制器对象——依赖注入（Dependency Injection，DI）现象。

##### 注意
```text
(1)Angular在创建控制器对象时，会根据形参列表中的每个形参的名称来创建依赖的对象，故控制器声明函数不能声明Angular无法识别的形参名——Angular只提供了这一种依赖注入方式——根据形参名来注入依赖的对象！
(2)若项目JS文件使用了类似yuicompressor等压缩程序，默认会把函数的形参名精简为一个字母的形式，会导致Angular的依赖注入失败！
  解决办法：
    module.controller('控制器名', ['$scope','$interval','$http',function(aaa,bbb,ccc){...}]);
```

#### 2.可以被注入的对象 — 所有的service/provider对象都可以被注入
```text
(1)$rootScope：在多个控制器间共享数据的服务
(2)$interval：提供周期性定时器服务
(3)$timeout：
(4)$log：提供五个基本的日志输出服务
(5)$http：提供异步HTTP请求（AJAX）服务
  用法： $http({method: 'GET',url: 'Url'}).
        then(function success(response) {
              // 请求成功执行代码
          }, function error(response) {
              // 请求失败执行代码
        });
  简化版：	$http.get('Url', config).then(success, error);
          $http.post('Url', data, config).then(success, error);
(6)$location
```

#### 3.ng模块中提供的过滤器(filter)

`Filter`: 把Model数据在显示时以某种特定的格式呈现。
```text
(1)lowercase
  {{ 表达式 | lowercase }}
(2)uppercase
  {{ 表达式 | uppercase }}
(3)number
  {{ 表达式 | number }}
  {{ 表达式 | number : 小数位数 }}
(4)currency
  {{ 表达式 | currency }}
  {{ 表达式 | currency : '货币符号' }}
(5)date
  {{ 表达式 | date }}    	默认格式： Sep 1, 2015
  {{ 表达式 | date : '日期时间格式'}}
```