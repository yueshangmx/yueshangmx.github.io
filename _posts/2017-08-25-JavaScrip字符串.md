---
layout: post
title: 10.JavaScript字符串和正则表达式
date: 2017-08-25
description: "JavaScript，字符串，String，正则，正则表达式，RegExp"
tags: 笔记   
---

### String：字符串
- 字符串：多个字符组合成的一个只读的集合（数组）。

凡是数组对象中，不修改原对象的API，字符串都能用！比如slice，indexof。<br>
凡是数组对象中，直接修改原对象的API，字符串都不能用！比如：push，sort，splice

- 内置对象：ES标准中已经定义好的，由浏览器厂商已经实现的对象。

共有11个：String Number Boolean；Array Data Math RegExp； Error；Function Object；Global

- 包装类型：临时封装原始类型数据，提供对原始类型数据的操作方法。

3中包装类型：String  ；  Number  ；  Boolean(不能new)；

为什么使用包装类型：原始类型的数据本来没有任何方法，当程序中使用原始类型调用方法时，程序会自动创建包装类型对象封装该数据。 

包装类型自动使用。函数调用完之后，包装类型会自动释放。


### String API
- 1.转义字符：当字符串的内容和程序的特殊符号冲突时，或字符串中包含功能字符时，都用 \ 转化字符的意义。

\n：换行  \t: 一次缩进Tab键

- 2.大小写转换：将字符串中所有字符都统一转为大写或小写。
```
转大写:str=str.toUpperCase();
转小写:str=str.toLowerCase();
```

- 3.获取指定位置的字符：3种 
```
1. str[i]; /*第i位的字符*/
2. str.charAt(i)
3. str.charCodeAt(i)-->获得字符的unicode号
```

- 4.查找关键字的位置：2种
```
1) var i=str.indexOf(kword[,starti]);
    /*从左向右，查找kword首字符在字符串中的下标,如果没找到，返回-1*/
    /*starti：从starti位置开始向后查找下一个,如果省略starti，默认从0开始找*/
2) var i=str.lastIndexOf(kword[,starti])
    /*从starti位置开始，向左找！下一个kword*/
```

- 5.获取子字符串：3种
```
① var subStr=str.slice(starti [,endi+1]);        pid.slice(6,-5+1)
② var subStr=str.substring(starti [,endi+1]);        pid.substring(6,pid.length-5);
    不支持负参数
③ var subStr=str.substr(starti,取几个);         pid.subStr(6,8);
```

- 6.分割字符串
```
var arr=str.split("分隔符");  /*arr中以数组形式保存每段子字符串。*/
固定套路：将字符串切割为字符数组：
    var chars=str.split(""); 
空字符串相当于把字符串按每个字符切割
```

- 7.模式匹配：按照规则查找或替换字符串中的子内容。

(1) 查找：2中
　　1) 只能从开始位置，找第一个匹配的关键字
```
var i=search(/kword/i); /*i表示忽略大小写*/
/*仅判断有没有关键字时;跟indexOf区别是 search专门用于模式匹配，indexOf不支持模式匹配*/
```
　　2) 获得所有关键字的内容，或个数：
```
var arr=str.match( /kword/ig); /*i忽略大小写，g表示global全局*/
    arr中保存了所有关键字的内容，arr.length表示匹配关键字的个数
    #如果没有找到，返回null  先判断是否为null，再处理。
    #match方法只能获得第一个关键字的位置
    #match加g无法获得关键字的下标位置！
```

- 8.替换
```
var newStr=str.replace(模式,"替换内容")；
```

### 正则表达式
正则表达式对象RegExp：封装了正则表达式，提供了利用正则表达式执行验证和查找的API。

只要利用正则表达式执行验证和查找功能时，就用正则表达式对象。一个关键词的原文，就是最简单的正则。

>* 创建正则表达式对象
```
(1) var reg=/正则表达式/ig；
    何时使用：正则表达式在运行时不会改变
(2) var reg=new RegExp(“正则表达式”,“ig”)；
    何时使用：如果在运行时正则表达式可能被改变时，强调：所有\改成\\
```

- 备选字符集：规定某*一位*字符可选的备选文字列表。
```
语法格式：[备选字符列表];
```
如果备选字符集相互联系，可以用"-"表示"到"；比如`[0-9]`表示0到9十个数字。

<font color="#f00">强调：无论字符集中有多少字符，都必须且只能选一个。一个中括号，只代表一位字符</font>


- 预定义字符集：专门表示常用的连续的字符集
```
^ ==> [^abc],除了abc之外的字符
\d ==> [0-9]：一位数字
\w ==> [0-9a-zA-Z_]：1位数字、字母或下划线
\s ==> [空字符]：代表一位空字符，空格 Tab符
. ==> 点代表除了换行外，其他所有字符都可以
```

- 量词：规定一个字符集出现的次数
1.明确数量
```
{min,max}	最少min到最多max
{min,}		最少min位
{n}		必须n位
```
比如：身份证号：至少15位数字，后面3位有2位数字，最后一位是数字或x X.<br>
`\d{15}(\d{2}[0-9xX])?`

2.不确定数量
```
？==>{0,1}	表示可有可无，最多一次
* ==>{0,}	表示可有可无，数量不限
+ ==>{1,}	表水至少一次，数量不限
```
比如：手机号：+86或0086 可有可无，最多1次，空字符可有可无，多了数量不限，1，从3,4,5,7,8选一个，最后必须是9位数字。<br>
`(\+86|0086)?\s*1[34578]\d{9}`

>* RegExp对象的方法
1.格式验证
```
var bool=reg.test(str);	/*验证str格式是符合reg的要求,返回的是Boolean值*/
    /*test方法默认值要部分匹配即可，如果要求从头到尾必须完整匹配，需要在正则表达式前加^,后加$*/
    ^: 表示以xxx开头；
    $: 表示以xxx结尾。
```
比如：密码强度要求：8位密码，只能是字母、数字组合，至少一位大写字母，一位小写字母<br>
`(?![a-z0-9]*$)(?![A-Za-z]*$)[a-zA-Z0-9]{8}`

2.查找API
```
var arr=reg.exec(str);  /*在str中查找所有符合reg规定的关键字，要加g*/
    /*返回的是数组,其中：arr[0]：保存了当前关键字的内容*/
    /*arr.index：保存了当前关键字的位置*/
    /*arr.lastindex：保存下次开始查找的位置*/
```

```
查找关键字方法对比
(1) var i=str.search(reg)  /*判断有没有*/	
    缺点：不能指定位置
(2) var arr=str.match(reg)  /*获取关键字的内容，个数*/	
    缺点：不能返回位置
(3) var i=str.indexOf(“kword”[,starti])  /*从指定位置查找下一个关键字位置*/
    缺点：不能支持正则
(4) var arr=reg.exec(str)  /*即可获得内容，又能获得位置*/
    缺点：复杂
```

